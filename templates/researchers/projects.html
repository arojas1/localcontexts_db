{% extends 'research-base.html' %} {% block title %} | Projects {% endblock %}{% load static %}{% block researcher_content %}

<div class="content-card content-card-space white-bg">

    <div class="flex-this space-between">
        <div>
            <h2 class="orange-text weight-600">Projects</h2>
        </div>

        <div class="flex-this align-center">
            <a class="action-btn" href="{% url 'researcher-create-project' researcher.id %}">
                Create a project     <i class="fa fa-long-arrow-right"></i>
            </a>
        </div>
    </div>

</div>

{% if contribs %}
    {% for c in contribs %}
        <div id="project-unique-{{ c.project.unique_id }}" class="content-card content-card-space white-bg" style="scroll-margin-top: 8em;"> 

            <div class="flex-this space-between column">
        
                <div class="w-100 flex-this">

                    <div class="w-50"> 
                            <h4 class="darkteal-text weight-600 no-top-margin">{{ c.project.title }}</h4>
                            <p class="no-top-margin">
                                Date Created: {{ c.project.date_added }}<br>
                                Project Type: {{ c.project.project_type }}<br>
                                Project Contributors: 
                                {% if c.institution %}
                                    {{ c.institution.institution_name }} 
                                {% endif %}

                                {% if c.researcher %}
                                    , {{ c.researcher.user.get_full_name }}
                                {% endif %} 

                                {% if c.community %}
                                    , {{ c.community.community_name }}
                                {% endif %}<br>
                            </p>
                    </div>
        
                    <div class="w-50 flex-this column">
                        <div class="flex-this flex-end w-100">
                            <div>
                                <a id="{{ c.id }}" onclick="showMoreProject(this)" class="darkteal-text pointer">Show More <i class="fa fa-angle-down" aria-hidden="true"></i></a>
                            </div>
                        </div> 
                    </div>
        
                </div>
        
            </div>

            <div class="flex-this space-between">
                <div class="w-90">
                    {{ c.project.description }}
                </div>
                <div class="w-20">
                    <a href="{% url 'researcher-notify-communities' researcher.id c.project.id %}">
                        <button class="action-btn">Notify Communities <i class="fa fa-users" aria-hidden="true"></i></button>
                    </a>
                </div>
            </div>

            <div>
                <p>
                    Project Contact: {{ c.project.project_contact}} <br>
                    Project Contact Email: {{ c.project.project_contact_email}} <br>
                    Project URL: {{ c.project.url }}
                </p>
            </div>

            <div class="flex-this column" id="expand-contrib-{{ c.id }}" style="height: 0px; overflow:hidden;">
                <div>
                    <p class="weight-500">Labels attached to this project</p>
                </div>
                    {% for bclabel in c.project.bclabels.all %}

                        <div class="flex-this">
                            <div class="small-label">
                                {% include 'bclabels/which-label.html' %}
                            </div>
                            <div class="pad-left-2">
                                <p class="darkteal-text no-top-margin">Label shared by {{ c.community.community_name }} </p>
                                <p class="weight-500"> {{ bclabel.name }} </p>
                                <p>
                                    {{ bclabel.default_text}}
                                </p>
                                <hr>
                            </div>
                        </div>
                    {% endfor %}

                    {% for tklabel in c.project.tklabels.all %}

                    <div class="flex-this">
                        <div class="small-label">
                            {% include 'tklabels/which-label.html' %}
                        </div>
                        <div class="pad-left-2">
                            <p class="darkteal-text no-top-margin">Label shared by {{ c.community.community_name }} </p>
                            <p class="weight-500"> {{ tklabel.name }} </p>
                            <p>
                                {{ tklabel.default_text}}
                            </p>
                            <hr>
                        </div>
                    </div>
                {% endfor %}

            </div>

        </div>
    {% endfor %}
{% endif %}

{% endblock %}