{% extends 'register-base.html' %} {% block title %} Create Institution {% endblock %}{% load static %} {% block card %}
<script src="{% static 'javascript/ror.js' %}" type="text/javascript" defer></script>

<div class="flex-this column w-90">
    <div class="flex-this space-between">
        <div><h2 class="no-top-margin margin-bottom-8">Institution Account</h2></div>
        <div>Or <a class="darkteal-text underline-hover" href="{% url 'connect-institution' %}">request to join an existing institution</a>  </div>
    </div>

    <p class="no-bottom-margin no-top-margin">
        The institution details provided below will default to a public display in the Local Contexts Registry.
        The intent is to help others to network with other registered institutions.
        Providing your details will give consent to publicly being listed on the Registry.
    </p>

    <form action="" method="POST" class="flex-this column w-100">
        {% csrf_token %}

        <div class="flex-this column">
                <label class="pad-top-1-5" for="country">Country</label>
                {{ form.country }}

            <div class="flex-this w-100">
                <div class="w-50 margin-right-1 pad-top-1-5">
                    <label for="institution-type-select">Institution Type</label>
                    <div class="tooltip"><strong>i</strong>
                        <span class="tooltiptext">Options: <br> Nonprofit <br> Company <br> Education <br> Facility <br> Government <br> Healthcare <br> Archive <br> Other</span>
                    </div>

                    <select id="institution-type-select" class="w-100">
                        <option disabled selected="selected">-- Select Institution Type --</option>
                    </select>
                </div>
                <div class="w-50 pad-top-1-5">
                    <label for="institution-select">Institution Name</label>
                    <select id="institution-select" name="institution_name" class="w-100" required>
                        <option disabled selected="selected" value="">-- Select Institution Name --</option>
                    </select>
                </div>
            </div>

            <small>These institutions come from <a class="darkteal-text underline-hover" href="https://ror.org/" target="_blank" rel="noopener">ROR</a>. If your institution is not listed here, <span id="openNORORModalBtn" class="darkteal-text underline-hover pointer">please fill out this form</span>.</small>

        </div>

        <div class="w-100 flex-this">
            <div class="w-50 pad-top-1-5 margin-right-1">
                <label class="pad-top-1-5" for="city_town">Town or City</label><br>
                {{ form.city_town }}
            </div>

            <div class="w-50 pad-top-1-5">
                <label for="state_province_region">State, Province, or Region</label>
                <div class="tooltip"><strong>i</strong>
                    <span class="tooltiptext">By stating your location we will be able to connect your Projects with communities associated with this location.</span>
                </div>
                
                <br>
                {{ form.state_province_region }}
            </div>
        </div>

        <div class="w-100">
            <div class="pad-top-1-5">
                <label for="description">Institution Description</label>
                <div class="tooltip"><strong>i</strong>
                    <span class="tooltiptext">An institution description allows you to share key public information about your institution or organization with other users on the Hub.</span>
                </div>

                <br>
                {{ form.description }}
            </div>
            <small id="charCount" class="block text-align-right">200/200</small>
        </div>

        <div class="flex-this space-between">
            <div>
                {% if form.errors %}
                    <small class="red-text">{{ form.description.errors.as_text }}</small>
                {% endif %}
                {% include 'partials/_alerts.html' %}
            </div>
    
            <div class="margin-top-8">
                <button class="primary-btn action-btn margin-top-2" name="create-institution-btn">Continue <i class="fa fa-arrow-right"></i></button>
            </div>
        </div>

    </form>

</div>

<!-- non-ROR modal -->
<div id="noRORModal" class="modal hide">

    <div class="modal-defaults noror-modal-box flex-this column w-100">
        <div class="modal-content-padding w-100">

            <div class="flex-this space-between">
                <div>
                    <h2>Institution Creation Form</h2>  
                    <p class="no-top-margin">Create an institution that is not on the ROR list.</p>  
                </div>
    
                <div>
                    <div id="closeNORORmodal" class="primary-btn white-btn">Close X</div>
                </div>
            </div>

            <form method="POST" action="">
                {% csrf_token %}
                <div class="flex-this column w-100">

                    <label for="institution_name">Institution Name</label>
                    {{ noror_form.institution_name }}
                    {% if noror_form.institution_name.errors %}
                        <div class="msg-red w-50"><small>{{ noror_form.institution_name.errors.as_text }}</small></div> 
                    {% endif %}

                    <div class="w-100 margin-top-1">
                        <label for="description">Description</label><br>
                        {{ noror_form.description }}
                        {% if noror_form.description.errors %}
                            <div class="msg-red w-80"><small>{{ noror_form.description.errors.as_text }}</small></div> 
                        {% endif %}
                    </div>

                    <div class="w-100 flex-this space-between">
                        <div class="pad-top-1-5 margin-right-1 w-50">
                            <label class="pad-top-1-5" for="city_town">Town or City</label><br>
                            {{ noror_form.city_town }}
                        </div>

                        <div class="pad-top-1-5 w-50">
                            <label class="pad-top-1-5" for="city_town">State or Province</label><br>
                            {{ noror_form.state_province_region }}
                        </div>
                    </div>

                    <div class="pad-top-1-5 margin-right-1">
                        <label class="pad-top-1-5" for="country">Country</label><br>
                        {{ noror_form.country }} 
                    </div>

                    {% include 'partials/_alerts.html' %} 

                    <div class="flex-this flex-end">
                        <button class="primary-btn action-btn margin-top-2" name="create-institution-noror-btn">Continue <i class="fa fa-arrow-right"></i></button>
                    </div>                        

                </div>

            </form>

        </div>
    </div>

</div>

{% endblock %}