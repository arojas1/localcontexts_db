{% extends 'account-base.html' %} {% block title %} Update {% endblock %}{% load static %} {% block community_content %}

<div class="content-card content-card-space white-bg flex-this column">
    <h2 class="no-top-margin">Account Settings</h2>

    <div class="flex-this w-100">

        <div class="side-nav-container">
            <a href="{% url 'update-community' community.id %}">
                <div class="flex-this side-nav-item {% if 'update' in request.path %} selected {% else %} grey-text {% endif %}">
                    <div class="w-20 margin-right-8"><i class="fa fa-user fa-3x" aria-hidden="true"></i></div>
                    <div class="w-80">
                        <p class="no-top-margin"><strong>Community Account</strong><br>Contact name, email, location, description</p>
                    </div>  
                </div>   
            </a>
        </div>

        <div class="flex-this column w-80">
            <div class="flex-this space-between w-60">
                <div><h3 class="no-top-margin">Community Information</h3></div>
                <div>Account ID: {{ community.id }}</div>
            </div>

            <div class="w-70">
                <form method="POST" action="{% url 'update-community' community.id %}" enctype="multipart/form-data">
                    {% csrf_token %}

                    <div class="w-100 margin-bottom-8">
                        <label> Community Entity </label><br>                                           
                        {{ update_form.community_entity }}
                        {% if update_form.community_entity.errors %}
                            <div class="msg-red w-50"><small>{{ update_form.community_entity.errors.as_text }}</small></div> 
                        {% endif %}
                    </div>

                    <div class="w-100 margin-bottom-8">
                        {{ update_form.description.label }} <br>
                        {{ update_form.description }}
                        {% if update_form.description.errors %}
                            <div class="msg-red w-80"><small>{{ update_form.description.errors.as_text }}</small></div> 
                        {% endif %}
                    </div>

                    <div class="w-100 margin-bottom-8">
                        <div class="flex-this">
                            <div class="w-50 margin-right-1">
                                <label>State, Province, or Region</label> <br>
                                {{ update_form.state_province_region }}
                            </div>
                            <div class="w-50">
                                <label> City or Town </label><br>
                                {{ update_form.city_town }}
                            </div>                            
                        </div>
                        {% if update_form.state_province_region.errors %}
                            <div class="msg-red w-50"><small>{{ update_form.state_province_region.errors.as_text }}</small></div> 
                        {% endif %}
                        {% if update_form.city_town.errors %}
                            <div class="msg-red w-50"><small>{{ update_form.city_town.errors.as_text }}</small></div> 
                        {% endif %}
                    </div>

                    <div class="w-100 margin-bottom-8">
                        {{ update_form.country.label }} <br>
                        {{ update_form.country }}
                    </div>

                    <div class="margin-top-16">
                        <div class="hide">{{ update_form.image }}</div>

                        <div id="defaultPlaceholderUrl" data-url="{% static 'images/placeholders/community-place.jpg' %}"></div>

                        <div class="flex-this space-between">
                            <div class="w-50">
                                <div id="imagePreviewContainer" class="imgPreviewContainer">
                                    {% if not community.image %} 
                                        <img src="{% static 'images/placeholders/community-place.jpg' %}">
                                    {% else %}
                                        <img src="{{ update_form.instance.image.url }}" alt="{{ update_form.instance.community_name }} image">
                                    {% endif %}
                                </div>
                            </div>

                            <div class="flex-this">
                                <div>
                                    <button id="altImageUploadBtn" class="primary-btn green-btn margin-right-8">Upload Image <i class="fa-solid fa-upload"></i></button> 
                                </div>
                                <div>
                                    <button id="clearImageBtn" class="primary-btn white-btn" name="clear_image">Clear Image</button>
                                </div>
                            </div>                                
                        </div>

                        {% if update_form.image.errors %}
                            <div class="msg-red w-50"><small>{{ update_form.image.errors.as_text }}</small></div> 
                        {% endif %}
                    </div>

                    <div><h3>Community Contact</h3></div>
                    <div class="w-100 margin-bottom-16">
                        <div class="flex-this">
                            <div class="w-50 margin-right-1">
                                <label> Name </label><br>                                           
                                {{ update_form.contact_name }}
                            </div>
                            <div class="w-50">
                                <label> Email </label><br>                                       
                                {{ update_form.contact_email }}
                            </div>                            
                        </div>
                        {% if update_form.contact_name.errors %}
                            <div class="msg-red w-50"><small>{{ update_form.contact_name.errors.as_text }}</small></div> 
                        {% endif %}
                        {% if update_form.contect_email.errors %}
                            <div class="msg-red w-50"><small>{{ update_form.contect_email.errors.as_text }}</small></div> 
                        {% endif %}
                    </div>

                    {% include 'partials/_alerts.html' %}

                    <div class="flex-this space-between w-100">
                        <div class="margin-top-16 w-40">
                            <button class="primary-btn action-btn margin-top-2  default-btn-width">Save</button>
                        </div>
                        <p>
                            <small class="grey-text">Providing your personal information is optional.
                                By providing it, you consent for it to be shown to other Hub users, see the <a href="https://localcontexts.org/privacy-policy/" class="darkteal-text underline-hover" target="_blank" rel="noopener">Privacy Policy <i class="fa-solid fa-arrow-up-right-from-square fa-xs"></i></a>.</small>
                        </p> 
                    </div>
                </form>
            </div>

        </div>
    </div>

</div>

{% endblock %}
