{% extends 'base.html' %} {% load static %} {% block content %} {% include 'partials/_auth-header.html' %}
<section class="grey-bg">

    {% include 'partials/_community-info.html' %}
    {% include 'partials/_community-nav.html' %}

    <div>
            <div class="content-card white-bg flex-this community-member-card">
                <div class="orange-bg color-section">
                </div>
                <div class="w-90 member-name">
                    <h4 class="weight-500">
                        {% if community.community_creator.get_full_name %}
                            {{ community.community_creator.get_full_name }}
                        {% else %}
                            {{ community.community_creator }}
                        {% endif %}
                    </h4>
                </div>
                <div class="w-20 member-role">
                    <h4>Administrator</h4>
                </div>
            </div>

            {% for admin in community.get_admins %}

                <div class="content-card white-bg flex-this community-member-card">
                    <div class="orange-bg color-section">
                    </div>
                    <div class="w-90 member-name">
                        <h4 class="weight-500">
                            {% if admin.get_full_name %}
                                {{ admin.get_full_name }}
                            {% else %}
                                {{ admin }}
                            {% endif %}
                        </h4>
                    </div>
                    <div class="w-20 member-role">
                        <h4>Administrator</h4>
                    </div>
                </div>

            {% endfor %}

            {% for editor in community.get_editors %}
                <div class="content-card white-bg flex-this community-member-card">
                    <div class="darkgreen-bg color-section">
                    </div>
                    <div class="w-90 member-name">
                        <h4 class="weight-500">
                            {% if editor.get_full_name %}
                                {{ editor.get_full_name }}
                            {% else %}
                                {{ editor }}
                            {% endif %}                        
                        </h4>
                    </div>
                    <div class="w-20 member-role">
                        <h4>Editor</h4>
                    </div>
                </div>
            {% endfor %}

            {% for viewer in community.get_viewers %}
                <div class="content-card white-bg flex-this community-member-card">
                    <div class="darkteal-bg color-section">
                    </div>
                    <div class="w-90 member-name">
                        <h4 class="weight-500">
                            {% if viewer.get_full_name %}
                                {{ viewer.get_full_name }}
                            {% else %}
                                {{ viewer }}
                            {% endif %}                        
                        </h4>                    </div>
                    <div class="w-20 member-role">
                        <h4>Viewer</h4>
                    </div>
                </div>
            {% endfor %}

            {% if community.community_creator == request.user %}

                <a onclick='addMemberModal()'>
                    <div class="flex-this add-member-card">
                        <div class="w-100 add-member">
                            <h4 class="darkteal-text weight-500">+ Add Members </h4>
                        </div>
                    </div>
                </a>

                <div id="add-member-modal" class="modal">

                    <div class="add-member-modal-wrapper flex-this column w-100">
                  
                        <div id="close-modal" class="close-modal-btn w-100"> <span>&times;</span></div>
                        <div class="add-member-modal-content w-100">
                            <div>
                                <h4 class="weight-500">Add Members to <span class="darkteal-text">{{community.community_name}}</span></h4>
                            </div>
                            <div class="w-100 member-modal-form flex-this column">
                              <form method="POST" action="{% url 'members' community.id %}">
                                  {% csrf_token %}
                      
                                  <div class="flex-this"> 
                                      <div class="w-50">
                                        <div> 
                                            {{ form.receiver.label }} <br>
                                            {{ form.receiver }} 
                                          </div>
                                          <div>
                                            {{ form.role.label }} <br>
                                            {{ form.role }} 
                                          </div>
                                      </div>


                                      <div class="w-50">
                                        <div>
                                            {{ form.message.label }}<br>
                                            {{ form.message }}
                                        </div>
                                      </div>
                                  </div>
                      
                                  <div>
                                    <!-- Alerts -->
                                    {% include 'partials/_alerts.html' %}
                                            <p>- Admins and Editors have access to create and manage labels.</p>
                                      <button id="test-btn" class="action-btn">Send Invitation </button>
                                  </div>
                                </form>
                            </div>
                        </div>

                  
                    </div>
                  </div>
            {% endif %}

    </div>
    
</section>

{% include 'partials/_auth-footer.html' %}
{% endblock %}