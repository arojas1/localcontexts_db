{% extends 'sub-base.html' %} {% block title %} | Edit Label {% endblock %}{% load static %} {% load custom_tags%} {% block community_content %}

<div class="content-card-v2 content-card-space white-bg">
    <div class="w-70">
        <h2 class="no-top-margin">Edit Label</h2>
        <p>You can make edits to your Label until it is approved</p>
    </div>
</div>

<div class="content-card-v2 content-card-space white-bg">

    <div class="flex-this column border-bottom-solid-teal">

        <form method="POST" action="">
            {% csrf_token %}
            <div>
                <p class="w-80 bold">
                    {% if bclabel %} {{ bclabel.name }} {% endif %}
                    {% if tklabel %} {{ tklabel.name }} {% endif %}
                </p>
                <div class="w-80">
                    <label for="default_text">Label text</label>
                    {{ form.default_text }}
                </div>
            </div>

            {{ add_translation_formset.management_form }}
            {{ formset.management_form }}


            {% if bclabel.bclabel_translation.all or tklabel.tklabel_translation.all %}
                <div><p class="bold">Translated Label text</p></div>

                {% if formset %}
                    <div class="w-80">
                        {% for translation_form in formset %}
                            {% for hidden in translation_form.hidden_fields %} {{ hidden }} {% endfor %}

                            <div class="flex-this space-between">
                                <div class="w-50">
                                    <label>Customized title</label>
                                    {{ translation_form.title }}
                                </div>
                                <div>
                                    <label>Language</label>
                                    {{ translation_form.language }}
                                </div>
                            </div>
                            {{ translation_form.translation }}    
                        {% endfor %}                
                    </div>
                {% endif %}

            {% else %}

                {% for tran_form in add_translation_formset %}
                    {% for hidden in tran_form.hidden_fields %}{{ hidden }}{% endfor %}
                        <div id="translation-form-0" class="flex-this column margin-top-16">
                            <div class="flex-this w-80">
                                <div class="w-30 margin-right-16"><label>Local name</label><br>{{ tran_form.title }}</div>
                                <div class="w-30"><label>What language is this written in?</label><br>{{ tran_form.language }}</div>
                            </div>
                            <div class="w-80"><label>Translated text</label><br>{{ tran_form.translation }}</div>
                        </div>
                {% endfor %}

                {% if add_translation_formset.errors %}
                    {% for error in add_translation_formset.errors %}
                        <div><small style="color:red;"> {{ error }}</small></div>
                    {% endfor %}
                {% endif %}

            {% endif %}


            <div class="text-align-right margin-bottom-8">
                <button class="primary-btn action-btn margin-top-1">Save as draft</button> 
            </div>
        </form>
    
    </div>

</div>



{% endblock %}