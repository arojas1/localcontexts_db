{% load static %}

<div class="dashcard show">
    <div class="flex-this">

        <div class="dashcard-img-container">
            <img loading="lazy" 
                class="profile-img" 
                {% if community %}
                    src="{% if community.image %} {{ community.image.url }} {% else %} {% static 'images/placeholders/community-place.jpg' %}{% endif %}" 
                    alt="{{ community.community_name }} image"
                {% endif %}
                {% if institution %}
                    src="{% if institution.image %} {{ institution.image.url }} {% else %} {% static 'images/placeholders/institution-place.jpg' %}{% endif %}" 
                    alt="{{ institution.institution_name }} image"
                {% endif %}
                {% if researcher %}
                    src=" {% if researcher.image %} {{ researcher.image.url }} {% else %} {% static 'images/placeholders/researcher-place.jpg' %} {% endif %}" 
                    alt="{{ researcher.researcher_name }} image"
                {% endif %}
            >
        </div>
        <div class="flex-this column dashcard-text-container">
            <div><h3 class="dashcard-h3 darkteal-text">
                
                {% if community %}{{ community }}{% endif %}
                {% if institution %}{{ institution }}{% endif %}
                {% if researcher %}{% if researcher.user.get_full_name %} {{ researcher.user.get_full_name }} {% else %} {{ researcher.user.username }} {% endif %}{% endif %}
            </h3></div>
            <div>
                <p class="dashcard-subheader">
                    {% if community %}
                        Community | Members: {% if community.get_member_count < 10 %}0{{ community.get_member_count }}{% else %}{{ community.get_member_count }}{% endif %} | 
                        Location: {% if community.city_town %} {{ community.city_town }}, {% endif %} {% if community.state_province_region %} {{ community.state_province_region }}, {% endif %} {% if community.country.name %} {{ community.country.name }}{% endif %}
                        {% if not community.city_town and not community.state_province_region and not community.country %} None specified {% endif %}
                    {% endif %}
                    {% if institution %}
                        Institution | Members: {% if institution.get_member_count < 10 %}0{{ institution.get_member_count }}{% else %}{{ institution.get_member_count }}{% endif %} | 
                        Location: {% if institution.city_town %} {{ institution.city_town }}, {% endif %} {% if institution.state_province_region %} {{ institution.state_province_region }}, {% endif %} {% if institution.country.name %} {{ institution.country.name }}{% endif %}
                        {% if not institution.city_town and not institution.state_province_region and not institution.country %} None specified {% endif %}
                    {% endif %}
                    {% if researcher %}
                        Researcher | Location: 
                        {% if researcher.user.user_profile.city_town %} {{ researcher.user.user_profile.city_town }}, {% endif %} 
                        {% if researcher.user.user_profile.state_province_region %} {{ researcher.user.user_profile.state_province_region }}, {% endif %} 
                        {% if researcher.user.user_profile.country.name %} {{ researcher.user.user_profile.country.name }}{% endif %}
                        {% if not researcher.user.user_profile.city_town and not researcher.user.user_profile.state_province_region and not researcher.user.user_profile.country %}
                            None specified
                        {% endif %}
                    {% endif %}
                </p>
            </div>
            <div><p class="dashcard-description description-sm">
                {% if community %}
                    {% if community.description %}{{ community.description }}{% else %} No description provided. {% endif %}
                {% endif %}
                {% if institution %}
                    {% if institution.description %}{{ institution.description }} {% else %} No description provided. {% endif %}
                {% endif %}
                {% if researcher %}
                    {% if researcher.description %}{{ researcher.description }} {% else %} No description provided. {% endif %}
                {% endif %}
            </p></div>
        </div>

        <div class="dashcard-btn-container">
            <div class="margin-left-16">
                <a 
                    class="primary-btn action-btn"
                    {% if community %}
                        href="{% url 'public-community' community.id %}" 
                    {% endif %}
                    {% if institution %}
                        href="{% url 'public-institution' institution.id %}"                    
                    {% endif %}
                    {% if researcher %}
                        href="{% url 'public-researcher' researcher.id %}"
                    {% endif %}
                >View public page</a>
            </div>
        </div>

    </div>
</div>